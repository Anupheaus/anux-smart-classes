!function webpackUniversalModuleDefinition(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports["anux-smart-classes"]=t():e["anux-smart-classes"]=t()}(global,(function(){return function(e){var t={};function __webpack_require__(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,__webpack_require__),r.l=!0,r.exports}return __webpack_require__.m=e,__webpack_require__.c=t,__webpack_require__.d=function(e,t,n){__webpack_require__.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},__webpack_require__.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.t=function(e,t){if(1&t&&(e=__webpack_require__(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(__webpack_require__.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)__webpack_require__.d(n,r,function(t){return e[t]}.bind(null,r));return n},__webpack_require__.n=function(e){var t=e&&e.__esModule?function getDefault(){return e.default}:function getModuleExports(){return e};return __webpack_require__.d(t,"a",t),t},__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=1)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=new WeakMap,o=new WeakMap,i=new WeakMap;function getInstanceMeta(e){return r.get(e)}function getBaseTypeMeta(e,t){const n=getInstanceMeta(e);if(!n)return;if(n.type===t)return n;const r=n.extendedTypes.get(t);return r?getInstanceMeta(r):void 0}t.recordInstanceType=function recordInstanceType(e,t){i.has(e)||i.set(e,t)},t.getInstanceMeta=getInstanceMeta,t.associateMetaWith=function associateMetaWith(e,...t){t.forEach(t=>r.set(t,e))},t.getBaseTypeMeta=getBaseTypeMeta,t.isOfType=function isOfType(e,t){const n=getBaseTypeMeta(e,t);return!!n&&n.extendedTypes.has(t)},t.setBaseTypeOnDefinition=function setBaseTypeOnDefinition(e,t){o.has(e)||o.set(e,t)},t.getInstanceMetaFromDefinition=function getInstanceMetaFromDefinition(e,t){const n=o.get(t);if(n)return getBaseTypeMeta(e,n)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2);t.SmartClass=r.SmartClass,function __export(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n(10))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),o=n(5),i=n(6);t.SmartClass={define(e){const t=r.createFullDefinition(e),n=i.createConstructor(t);return n.setName(e.constructor.name),r.setBaseTypeOnDefinitions(t,n),n.definition=r.extractDerivedDefinition(t),n.isBaseTypeFor=o.createIsBaseTypeFor(n),n}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(4),o=n(0);t.createFullDefinition=function createFullDefinition(e){const t={};return Object.entries(e).forEach(([e,n])=>{if(n&&(t[e]=n,"constructor"!==e))if(r.is.function(n))t[e]={type:"method",scope:"public",definition:n};else{if("private"===n.scope)return;if("variable"===n.type&&null!=n.scope)return;const r=null!=n.type?n.type:"definition"in n?"method":"property",o=Object.assign({type:r,scope:"variable"===r?"private":"public"},n);t[e]=Reflect.areShallowEqual(o,n)?n:o}}),t},t.setBaseTypeOnDefinitions=function setBaseTypeOnDefinitions(e,t){Object.values(e).forEach(e=>o.setBaseTypeOnDefinition(e,t))},t.extractDerivedDefinition=function extractDerivedDefinition(e){const t={};return Object.entries(e).forEach(([e,n])=>{["public","protected"].includes(n.scope)&&(t[e]=n)}),t}},function(e,t){e.exports=require("anux-common")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(0);t.createIsBaseTypeFor=function createIsBaseTypeFor(e){return t=>r.isOfType(t,e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(0),o=n(7);t.createConstructor=function createConstructor(e){const t=function constructor(...n){const i=o.createPrototype(e,["public","protected","private"]),a=Object.create(i);r.recordInstanceType(a,"Internal - "+t.name);const c=o.createPrototype(e,["public","protected"]);r.recordInstanceType(c,"Protected - "+t.name),r.recordInstanceType(this,"Public - "+t.name);const s={type:t,internalInstance:a,protectedInstance:c,extendedTypes:new WeakMap([[t,null]]),variables:{}};return r.associateMetaWith(s,this,a,c),function addInternalSettingsTo(e){const t={extendWith(t,...n){const r=new t(...n);e.extendedTypes.set(t,r)},superOf(t){const n=e.extendedTypes.get(t),o=r.getInstanceMeta(n);return null==o?void 0:o.protectedInstance}};Object.defineProperty(e.internalInstance,"_",{get:()=>t,enumerable:!1,configurable:!1})}(s),e.constructor.call(a,...n),this};return t.prototype=o.createPrototype(e,["public"]),t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(0),o=n(8);function createSmartClassWrapper(e,t,n){return function smartClassWrapper(...i){const a=r.getInstanceMetaFromDefinition(this,e);if(!a)throw new o.MetaNotFound(this);const c=a.internalInstance;return n?t.bind(c):t.call(c,...i)}}t.createPrototype=function createPrototype(e,t){const n={};return Object.entries(e).forEach(([e,i])=>{if(t.includes(i.scope))switch(i.type){case"method":!function defineMethod(e,t,n){Object.defineProperty(e,t,{get:createSmartClassWrapper(n,n.definition,!0),enumerable:!0,configurable:!0})}(n,e,i);break;case"property":!function defineProperty(e,t,n){Object.defineProperty(e,t,{get:createSmartClassWrapper(n,n.get,!0),set:"set"in n?createSmartClassWrapper(n,n.set,!1):void 0,enumerable:!0,configurable:!0})}(n,e,i);break;case"variable":!function defineVariable(e,t,n){const i=function variableGetter(){const e=r.getInstanceMetaFromDefinition(this,n);if(!e)throw new o.MetaNotFound(this);return e.variables[t]}.setName(t+"_getter"),a=function variableSetter(e){const i=r.getInstanceMetaFromDefinition(this,n);if(!i)throw new o.MetaNotFound(this);i.variables[t]=e}.setName(t+"_setter");Object.defineProperty(e,t,{get:i,set:a,enumerable:!0,configurable:!0})}(n,e,i)}}),n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function __export(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n(9))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class MetaNotFound extends Error{constructor(e){super("Cannot find meta on this instance")}}t.MetaNotFound=MetaNotFound},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(11);t.variable=()=>({type:"variable",valueType:r.TypeOf()})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TypeOf=function TypeOf(){return null}}])}));
//# sourceMappingURL=index.js.map